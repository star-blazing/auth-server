<!DOCTYPE html>
<html>

<head>
  <title>Auth Test</title>
</head>

<body>
    <div id="amazon-root"></div>
    <script type="text/javascript">
   
       window.onAmazonLoginReady = function() {
         amazon.Login.setClientId('amzn1.application-oa2-client.a72e393376734e2e9c43d9896167e43d');
       };
       (function(d) {
         var a = d.createElement('script'); a.type = 'text/javascript';
         a.async = true; a.id = 'amazon-login-sdk';
         a.src = 'https://assets.loginwithamazon.com/sdk/na/login1.js';
         d.getElementById('amazon-root').appendChild(a);
       })(document);
   
   </script>
  <main>
  </main>


  <a href id="LoginWithAmazon">
    <img alt="Login with Amazon" src="https://images-na.ssl-images-amazon.com/images/G/01/lwa/btnLWA_gold_202x92.png" />
  </a>
  <script type="text/javascript">
    document.getElementById('LoginWithAmazon').onclick = function() {
    options = { scope : 'profile' };
    amazon.Login.authorize(options,
        'https://star-blazing-auth.herokuapp.com/amzOAuth');
    return false;
    };
</script>
<script type="text/javascript">
  document.getElementById('LoginWithAmazon').onclick = function() {
     setTimeout(window.doLogin, l);
     return false;
  };
  window.doLogin = function() {
    options = {};
    options.scope = 'profile';
    amazon.Login.authorize(options, function(response) {
       if ( response.error ) {
           alert('oauth error ' + response.error);
       return;
       }
       amazon.Login.retrieveProfile(response.access_token, function(response) {
           alert('Hello, ' + response.profile.Name);
           alert('Your e-mail address is ' + response.profile.PrimaryEmail);
           alert('Your unique ID is ' + response.profile.CustomerId);
           if ( window.console && window.console.log )
              window.console.log(response);
       });
   });
 };
</script>
</body>


</html>